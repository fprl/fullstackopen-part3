(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{39:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n(15),o=n.n(a),c=n(6),i=n(3),s=n(4),u=n.n(s),d="/api/persons",l={getAll:function(){return u.a.get(d).then((function(e){return e.data}))},create:function(e){return u.a.post(d,e).then((function(e){return e.data}))},deletePerson:function(e){return u.a.delete("".concat(d,"/").concat(e))},updatePerson:function(e,t){return u.a.put("".concat(d,"/").concat(e),t).then((function(e){return e.data}))}},f=n(0),j=function(e){var t=e.message,n=t.text,r=t.action;if(null===n)return null;var a=r||"none";return Object(f.jsx)("div",{className:a,children:n})},b=function(e){var t=e.setShowAll;return Object(f.jsxs)("div",{children:["filter shown with ",Object(f.jsx)("input",{onChange:function(e){return t(e.target.value)}})]})},h=function(e){var t=e.persons,n=e.setNewRequest,a=e.handleNotification,o=Object(r.useState)(""),c=Object(i.a)(o,2),s=c[0],u=c[1],d=Object(r.useState)(""),j=Object(i.a)(d,2),b=j[0],h=j[1];return Object(f.jsxs)("form",{onSubmit:function(e){e.preventDefault();var r={firstName:s,phoneNumber:parseInt(b)},o=t.find((function(e){return e.firstName.toLowerCase()===r.firstName.toLowerCase()})),c=o?Object.values(o).includes(r.phoneNumber):void 0;o&&c?alert("".concat(o.firstName," is already added to phonebook")):o&&!c?window.confirm("".concat(o.firstName," is already added to phonebook, replace the old number with a new one?"))&&l.updatePerson(o.id,r).then((function(e){n(new Date),a("update",e.firstName),u(""),h("")})):l.create(r).then((function(e){a("add",e.firstName),u(""),h(""),n(new Date)})).catch((function(e){var t=e.response.data.error;a("error",t)}))},children:[Object(f.jsxs)("div",{children:["name: ",Object(f.jsx)("input",{type:"text",required:!0,value:s,onChange:function(e){return u(e.target.value)}})]}),Object(f.jsxs)("div",{children:["number: ",Object(f.jsx)("input",{type:"tel",required:!0,value:b,onChange:function(e){return h(e.target.value)}})]}),Object(f.jsx)("button",{type:"submit",children:"add"})]})},O=function(e){var t=e.person,n=e.setNewRequest,r=e.handleNotification;return Object(f.jsxs)("li",{children:[t.firstName," ",t.phoneNumber," "," ",Object(f.jsx)("button",{onClick:function(){return e=t.id,void(window.confirm("Delete ".concat(t.firstName,"?"))&&(l.deletePerson(e).catch((function(e){return r("error",t.firstNameame)})).then((function(){return n(new Date)})),n(new Date),r("remove",t.firstName)));var e},children:"delete"})]})},m=function(e){var t=e.persons,n=e.setNewRequest,r=e.handleNotification;return Object(f.jsx)("ul",{children:t.map((function(e){return Object(f.jsx)(O,{person:e,setNewRequest:n,handleNotification:r},e.id)}))})},p=function(){var e=Object(r.useState)([]),t=Object(i.a)(e,2),n=t[0],a=t[1],o=Object(r.useState)(""),s=Object(i.a)(o,2),u=s[0],d=s[1],O=Object(r.useState)(new Date),p=Object(i.a)(O,2),v=p[0],N=p[1],w=Object(r.useState)({text:null,action:null}),x=Object(i.a)(w,2),g=x[0],S=x[1];Object(r.useEffect)((function(){l.getAll().then((function(e){return a(e)}))}),[v]);var k=function(e,t){var n={text:"error"===e?"Information of ".concat(t," has already been removed from server"):"".concat(e," ").concat(t),action:e};S(Object(c.a)(Object(c.a)({},g),n)),setTimeout((function(){return S(Object.assign({text:null,action:null}))}),5e3)},q=""===u?n:n.filter((function(e){return e.firstName.toLowerCase().includes(u.toLowerCase())}));return Object(f.jsxs)("div",{children:[Object(f.jsx)("h2",{children:"Phonebook"}),Object(f.jsx)(j,{message:g}),Object(f.jsx)(b,{setShowAll:d}),Object(f.jsx)("h2",{children:"Add a new"}),Object(f.jsx)(h,{persons:n,setNewRequest:N,handleNotification:k}),Object(f.jsx)("h2",{children:"Numbers"}),Object(f.jsx)(m,{persons:q,setNewRequest:N,handleNotification:k})]})};n(39);o.a.render(Object(f.jsx)(p,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.f41d0399.chunk.js.map