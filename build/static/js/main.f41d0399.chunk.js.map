{"version":3,"sources":["services/phones.js","components/Notification.js","components/Filter.js","components/PersonForm.js","components/Person.js","components/Persons.js","App.js","index.js"],"names":["BASE_URL","phonesService","getAll","axios","get","then","response","data","create","newObject","post","deletePerson","id","delete","updatePerson","updatedObject","put","Notification","message","text","action","style","className","Filter","setShowAll","onChange","e","target","value","PersonForm","persons","setNewRequest","handleNotification","useState","newName","setNewName","newPhone","setNewPhone","onSubmit","preventDefault","personObject","firstName","phoneNumber","parseInt","personExist","find","person","toLowerCase","numberExist","Object","values","includes","undefined","alert","window","confirm","updatedPerson","Date","createdPerson","catch","error","errorToDisplay","type","required","Person","onClick","firstNameame","Persons","map","App","setPersons","showAll","newRequest","notificationMessage","setNotificationMessage","useEffect","initialPersons","newNotification","setTimeout","assign","personsToShow","filter","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.f41d0399.chunk.js","sourcesContent":["import axios from 'axios';\r\nconst BASE_URL = '/api/persons';\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(BASE_URL);\r\n  return request.then(response => response.data)\r\n};\r\n\r\nconst create = newObject => {\r\n  const request = axios.post(BASE_URL, newObject);\r\n  return request.then(response => response.data)\r\n};\r\n\r\nconst deletePerson = id => {\r\n  const request = axios.delete(`${BASE_URL}/${id}`)\r\n  return request;\r\n};\r\n\r\nconst updatePerson = (id, updatedObject) => {\r\n  const request = axios.put(`${BASE_URL}/${id}`, updatedObject)\r\n  return request.then(response => response.data);\r\n}\r\n\r\nconst phonesService = {getAll, create, deletePerson, updatePerson};\r\nexport default phonesService;","import React from 'react';\r\n\r\nconst Notification = ({message}) => {\r\n  const {text, action} = message;\r\n  if (text === null) {\r\n    return null;\r\n  }\r\n\r\n  const style = action\r\n    ? action\r\n    : 'none';\r\n\r\n  return <div className={style}>{text}</div>;\r\n};\r\n\r\nexport default Notification;\r\n","import React from 'react';\r\n\r\nconst Filter = ({ setShowAll }) => {\r\n  const handleSearchChange = e => setShowAll(e.target.value);\r\n\r\n  return (\r\n    <div>\r\n      filter shown with <input onChange={handleSearchChange}></input>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Filter;\r\n","import React, { useState } from 'react';\r\nimport phonesService from '../services/phones';\r\n\r\nconst PersonForm = ({persons, setNewRequest, handleNotification}) => {\r\n  const [newName, setNewName] = useState('');\r\n  const [newPhone, setNewPhone] = useState('');\r\n\r\n  const addPerson = (e) => {\r\n    e.preventDefault();\r\n\r\n    const personObject = {\r\n      firstName: newName,\r\n      phoneNumber: parseInt(newPhone),\r\n    }\r\n    const personExist = persons.find(person => person.firstName.toLowerCase() === personObject.firstName.toLowerCase());\r\n    const numberExist = \r\n      personExist\r\n      ? Object.values(personExist).includes(personObject.phoneNumber)\r\n      : undefined;\r\n\r\n    if (personExist && numberExist) {\r\n      alert(`${personExist.firstName} is already added to phonebook`);\r\n      return;\r\n    } else if (personExist && !numberExist) {\r\n      const result = window.confirm(`${personExist.firstName} is already added to phonebook, replace the old number with a new one?`);\r\n      if (result) {\r\n        phonesService.updatePerson(personExist.id, personObject)\r\n          .then(updatedPerson => {\r\n            setNewRequest(new Date());\r\n            handleNotification('update', updatedPerson.firstName)\r\n            setNewName('');\r\n            setNewPhone('');\r\n          })\r\n      }\r\n    } else {\r\n      phonesService.create(personObject)\r\n        .then(createdPerson => {\r\n          handleNotification('add', createdPerson.firstName);\r\n          setNewName('');\r\n          setNewPhone('');\r\n          setNewRequest(new Date());\r\n        })\r\n        .catch(error => {\r\n          const errorToDisplay = error.response.data.error;\r\n          handleNotification('error', errorToDisplay);\r\n        })\r\n    }\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={addPerson}>\r\n    <div>\r\n      name: <input type=\"text\" required value={newName} onChange={e => setNewName(e.target.value)} />\r\n    </div>\r\n    <div>\r\n      number: <input type=\"tel\" required value={newPhone} onChange={e => setNewPhone(e.target.value)} />\r\n    </div>\r\n    <button type=\"submit\">add</button>\r\n  </form>\r\n  )\r\n}\r\n\r\nexport default PersonForm;\r\n","import React from 'react';\r\nimport phonesService from '../services/phones';\r\n\r\nconst Person = ({ person, setNewRequest, handleNotification }) => {\r\n\r\n  const handleClickDelete = (id) => {\r\n    const result = window.confirm(`Delete ${person.firstName}?`);\r\n    if (result) {\r\n      phonesService\r\n        .deletePerson(id)\r\n        .catch(error => handleNotification('error', person.firstNameame))\r\n        .then(() => setNewRequest(new Date()))\r\n      setNewRequest(new Date());\r\n      handleNotification('remove', person.firstName);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <li>\r\n      {person.firstName} {person.phoneNumber} {' '}\r\n      <button onClick={() => handleClickDelete(person.id)}>delete</button>\r\n    </li>\r\n  );\r\n};\r\n\r\nexport default Person;\r\n","import React from 'react';\r\nimport Person from './Person';\r\n\r\nconst Persons = ({ persons, setNewRequest, handleNotification }) => {\r\n  \r\n  return(\r\n    <ul>\r\n    {persons.map((person) => <Person key={person.id} person={person} setNewRequest={setNewRequest} handleNotification={handleNotification} />)}\r\n  </ul>\r\n  )\r\n};\r\n\r\nexport default Persons;\r\n","import React, { useState, useEffect } from 'react';\r\nimport phonesService from './services/phones';\r\nimport Notification from './components/Notification';\r\nimport Filter from './components/Filter';\r\nimport PersonForm from './components/PersonForm';\r\nimport Persons from './components/Persons';\r\n\r\nconst App = () => {\r\n  const [persons, setPersons] = useState([]);\r\n  const [showAll, setShowAll] = useState('');\r\n  const [newRequest, setNewRequest] = useState(new Date());\r\n  const [notificationMessage, setNotificationMessage] = useState({text: null, action: null});\r\n\r\n  const hookPersons = () => {\r\n    phonesService\r\n      .getAll()\r\n      .then(initialPersons => setPersons(initialPersons))\r\n    }\r\n\r\n  useEffect(hookPersons, [newRequest]);\r\n\r\n  const handleNotification = (action, person) => {\r\n    const text = \r\n      action === 'error'\r\n        ? `Information of ${person} has already been removed from server`\r\n        : `${action} ${person}`;\r\n\r\n    const newNotification = {text, action};\r\n    setNotificationMessage({...notificationMessage, ...newNotification})\r\n    setTimeout(() => setNotificationMessage(Object.assign({text: null, action: null})), 5000);\r\n  }\r\n\r\n  const personsToShow = showAll === ''\r\n    ? persons\r\n    : persons.filter(person => person.firstName.toLowerCase().includes(showAll.toLowerCase()))\r\n\r\n  return (\r\n    <div>\r\n      <h2>Phonebook</h2>\r\n      <Notification message={notificationMessage}/>\r\n      <Filter setShowAll={setShowAll} />\r\n\r\n      <h2>Add a new</h2>\r\n      <PersonForm persons={persons} setNewRequest={setNewRequest} handleNotification={handleNotification} />\r\n      \r\n      <h2>Numbers</h2>\r\n      <Persons persons={personsToShow} setNewRequest={setNewRequest} handleNotification={handleNotification} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\nimport './index.css';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n"],"sourceRoot":""}