(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{38:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var r=n(1),o=n(14),a=n.n(o),c=n(3),i=n(4),s=n.n(i),u="/api/persons",d={getAll:function(){return s.a.get(u).then((function(e){return e.data}))},create:function(e){return s.a.post(u,e).then((function(e){return e.data}))},deletePerson:function(e){return s.a.delete("".concat(u,"/").concat(e))},updatePerson:function(e,t){return s.a.put("".concat(u,"/").concat(e),t)}},l=n(0),f=function(e){var t=e.message,n=t.text,r=t.action;if(null===n)return null;var o=r||"none";return Object(l.jsx)("div",{className:o,children:n})},j=function(e){var t=e.setShowAll;return Object(l.jsxs)("div",{children:["filter shown with ",Object(l.jsx)("input",{onChange:function(e){return t(e.target.value)}})]})},b=function(e){var t=e.persons,n=e.setNewRequest,o=e.handleNotification,a=Object(r.useState)(""),i=Object(c.a)(a,2),s=i[0],u=i[1],f=Object(r.useState)(""),j=Object(c.a)(f,2),b=j[0],h=j[1];return Object(l.jsxs)("form",{onSubmit:function(e){e.preventDefault();var r={firstName:s,phoneNumber:parseInt(b)},a=t.find((function(e){return e.firstName.toLowerCase()===r.firstName.toLowerCase()})),c=t.find((function(e){return e.phoneNumber===r.phoneNumber}));a&&c?alert("".concat(a.firstName," is already added to phonebook")):a&&void 0===c?window.confirm("".concat(a.firstName," is already added to phonebook, replace the old number with a new one?"))&&(d.updatePerson(a.id,r),n(new Date),o("update",a.firstName),u(""),h("")):(d.create(r),n(new Date),o("add",r.firstName),u(""),h(""))},children:[Object(l.jsxs)("div",{children:["name: ",Object(l.jsx)("input",{type:"text",required:!0,value:s,onChange:function(e){return u(e.target.value)}})]}),Object(l.jsxs)("div",{children:["number: ",Object(l.jsx)("input",{type:"tel",required:!0,value:b,onChange:function(e){return h(e.target.value)}})]}),Object(l.jsx)("button",{type:"submit",children:"add"})]})},h=function(e){var t=e.person,n=e.setNewRequest,r=e.handleNotification;return Object(l.jsxs)("li",{children:[t.firstName," ",t.phoneNumber," "," ",Object(l.jsx)("button",{onClick:function(){return e=t.id,void(window.confirm("Delete ".concat(t.firstName,"?"))&&(d.deletePerson(e).catch((function(e){return r("error",t.firstNameame)})).then((function(){return n(new Date)})),n(new Date),r("remove",t.firstName)));var e},children:"delete"})]})},m=function(e){var t=e.persons,n=e.setNewRequest,r=e.handleNotification;return Object(l.jsx)("ul",{children:t.map((function(e){return Object(l.jsx)(h,{person:e,setNewRequest:n,handleNotification:r},e.id)}))})},O=function(){var e=Object(r.useState)([]),t=Object(c.a)(e,2),n=t[0],o=t[1],a=Object(r.useState)(""),i=Object(c.a)(a,2),s=i[0],u=i[1],h=Object(r.useState)(new Date),O=Object(c.a)(h,2),p=O[0],N=O[1],v=Object(r.useState)({text:null,action:null}),w=Object(c.a)(v,2),x=w[0],g=w[1];Object(r.useEffect)((function(){d.getAll().then((function(e){return o(e)}))}),[p]);var S=function(e,t){var n={text:"error"===e?"Information of ".concat(t," has already been removed from server"):"".concat(e," ").concat(t),action:e};g(Object.assign(x,n)),setTimeout((function(){return g(Object.assign({text:null,action:null}))}),5e3)},k=""===s?n:n.filter((function(e){return e.firstName.toLowerCase().includes(s.toLowerCase())}));return Object(l.jsxs)("div",{children:[Object(l.jsx)("h2",{children:"Phonebook"}),Object(l.jsx)(f,{message:x}),Object(l.jsx)(j,{setShowAll:u}),Object(l.jsx)("h2",{children:"Add a new"}),Object(l.jsx)(b,{persons:n,setNewRequest:N,handleNotification:S}),Object(l.jsx)("h2",{children:"Numbers"}),Object(l.jsx)(m,{persons:k,setNewRequest:N,handleNotification:S})]})};n(38);a.a.render(Object(l.jsx)(O,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.c089ca09.chunk.js.map